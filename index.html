<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pantheon of Nations - Rules</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Pantheon of Nations</h1>
    <nav>
      <a href="#components">Components</a>
      <a href="#general Information">General Information</a>
      <a href="#setup">Setup</a>
      <a href="#phases">Phases</a>
      <a href="#orders">Orders</a>
      <a href="#faq">FAQ</a>
    </nav>
  </header>

  <main>
    <section id="components">
       <div class="components-section">
        <h2 class="section-title">Game Components</h2>
        <div class="components-grid" id="componentsGrid">
            <!-- Components will be generated here -->
        </div>
    </div>
    </section>

    <section id="general Information">
      <h2>General Information</h2>
      <p>Pantheon of Nations is a strategic game set in a fantasy world. Players choose one of the nations. Each nation is led by a deity who has taken the physical form of an avatar. In addition to avatars, the battle involves followers – brave mortal warriors ready to give their lives for their deity. Each nation has unique mechanics, marked in the rules with its corresponding color (<span class="japan"> dark red for Japan</span>, <span class="vijayanagara"> light orange for Vijayanagara</span>, <span class="nomad"> blue for Nomads</span>, <span class="aztec"> green for Aztecs</span> ).</p>

      <h3>Game Objective</h3>
      <p>The objective of the game is to be the last surviving avatar - or part of the last surviving team - on the board.
When an avatar's health drops to 0, the controlling player is immediately eliminated from the game, and all their followers are removed from the battlefield.
Depending on the game mode, a different number of players participate in the confrontation.</p>

<p>In a 4-player game, players are divided into two teams of two. In this mode, victory is achieved when both avatars of the opposing team are eliminated - meaning one or two allied avatars may remain on the board.</p>

      <h3>Game Modes</h3>
      <ul>
  <li><strong>2 Players - Duel:</strong> A head-to-head battle where each player fights to be the last surviving avatar on the board.</li>
<li><strong>3 Players - Skirmish:</strong> A free-for-all where each player competes independently. The last surviving avatar wins.</li>
<li><strong>4 Players - Team Battle:</strong> Players are split into two teams of two. When both avatars on a team are eliminated, that team loses - the surviving team wins the game.</li>

      </ul>

      <h3>Game Terms</h3>
      <ul>
        <li><strong>Avatar:</strong> The physical embodiment of a deity.</li>
        <li><strong>Followers:</strong> Warriors representing various nations.</li>
        <li><strong>Unit:</strong> Both an avatar and a follower.</li>
        <li><strong>Line of Sight:</strong> A straight line between the unit using an ability and the target, not obstructed by other units and not extending beyond the boundaries of the game board.</li>
        <li><strong>Arcing Shot:</strong> A straight line that is not obstructed by other units (archers attack along such a trajectory).</li>
      </ul>
    </section>

    <section id="setup">
  <h2>Game Setup</h2>
  <h3>General Setup</h3>
  <ul>
    <li>Place the game board in the center of the table, choosing the correct side based on the number of players.</li>
    <li>Place the Blessing Board next to the main board.</li>
    <li>Shuffle the Blessing deck and place it on the Blessing Board. Fill all Blessing slots except the active slot.</li>
  </ul>

  <h3>Player Setup</h3>
  <ul>
    <li>Each player selects a civilization and takes its nation board, avatar miniature, follower tiles, ability cards, order tokens, status tokens, Faith tokens, health and initiative markers.</li>
    <li>Each player takes one passive (triggered) ability card and selects three active ability cards. Place them face up near your nation board. Sum the Attack values in the bottom-right of each ability card and place your Attack marker on that value on your nation board.</li>
    <li>Place your Health marker at 15 HP for 2-player games, 13 HP for 3-player games, and 12 HP for 4-player games.</li>
    <li>Keep your order tokens, status tokens, and Faith tokens next to your nation board.</li>
    <li>Place your avatar miniature on the starting hex.</li>
    <li>Follower setup varies by faction (see below).</li>
  </ul>

  <h3>Faction-Specific Setup</h3>
  <ul>
    <li class="vijayanagara"> Vijayanagara: Place the Elephant’s health marker at 7. Place all unit tiles next to your nation board. The Elephant may carry a foot follower.</li>
    <li class="japan"> Japan (Yamato): Japan has three special followers: Kamuso, Daimyo, and Shinobi. Choose one stat card for each of them (matching the name in the top-right corner), return the rest to the box. Place Daimyo’s health marker on the track, and arrange the selected stat cards beside the nation board.</li>
    <li class="nomad">Nomads: Place all unit tiles next to your nation board.</li>
    <li class="aztec">Aztecs: Place follower tiles according to the faction layout:<br>
      – Bottom row: Cuextecatl<br>
      – Middle: Butterfly Warriors<br>
      – Top (two adjacent stacks): Eagle Warriors and Jaguar Warriors.</li>
  </ul>

  <h3>Final Setup</h3>
  <ul>
    <li>Determine turn order randomly. Each player places their initiative marker on the initiative track.</li>
    <li>Starting with the first player, each player places two followers on hexes adjacent to their avatar.</li>
  </ul>

  <p>You are now ready to begin the game.</p>
</section>


    <section id="phases">
      <h2>Phases</h2>
      <p>The following rules describe gameplay for 2 players. All differences for other player counts are described later.</p>
      
      <div class="zero-round-info">
        <h3>Zero Round</h3>
        <p>The <strong>Zero Round</strong> skips the Betting Phase, Planning Phase, and End of Round Phase. Each player, in turn order, performs one action with each unit without placing an order token. Only <em>Movement</em> and <em>Recruit</em> actions are allowed.</p>
      </div>

      <div class="phases-container">
        <div class="phase-card">
          <h3>1. Betting Phase</h3>
  <p><strong>Each round, all players receive 5 Faith tokens.</strong> These tokens do not carry over — each round begins with a fresh set of 5 tokens per player.</p>
  <p>To determine turn order, each player secretly places any number of Faith tokens into a closed fist — this is their <strong>bid</strong>. Once all players are ready, fists are revealed simultaneously.</p>
  <ul>
    <li>The player with the highest bid becomes the <strong>first player</strong>.</li>
    <li>Other players take their turns in descending order of their bids.</li>
    <li>In case of a tie, tied players act in <strong>reverse order</strong> from the previous round.</li>
    <!-- <li>If it is the first round and there's a tie, turn order among tied players is determined randomly.</li> -->
  </ul>
  <h4>Blessing Track</h4>
  <p>After turn order is set, the first player interacts with the <strong>Blessing Track</strong>:</p>
  <ol>
    <li>Select one of the three <strong>Tier I Blessing cards</strong> to activate for the round.</li>
    <li>Move one of the two <strong>Tier II Blessing cards</strong> up to Tier I to refill the slot. This card will be available next round.</li>
  </ol>
  <p><strong>Blessing cards remain active for the entire round</strong>. They grant strong advantages to the first player and may change core game mechanics.</p>
        </div>

        <div class="phase-card">
  <h3>2. Planning Phase</h3>
  <p>In this phase, each player must assign <strong>exactly one order</strong> to <strong>one unit</strong>.</p>
  <ul>
    <li>For <strong>followers</strong>, order tokens are placed directly on their tiles on the board.</li>
    <li>For <strong>avatars</strong>, order tokens are placed on their portrait on the Nation Board.</li>
  </ul>
  <p>Players assign orders in <strong>initiative order</strong>, one by one.</p>
  <h4>Using Faith Tokens</h4>
  <ul>
    <li>Orders are paid using <strong>Faith tokens</strong> remaining after the Betting Phase.</li>
    <li><strong>1 Faith token</strong> allows you to place <strong>1 order token</strong>.</li>
    <li>Faith tokens may also be spent to <strong>remove Status Effects</strong>: each token removes one Status Effect token from a friendly unit.</li>
    <li>Once a player runs out of Faith tokens, their Planning Phase ends.</li>
  </ul>
  <p><strong>Note:</strong> A unit may not receive more than one order per round.</p>
  <h4>Types of Orders</h4>
  <p>The following orders are available:</p>
  <ul>
    <li><strong>Movement</strong></li>
    <li><strong>Recruit</strong></li>
    <li><strong>Attack</strong></li>
    <li><strong>Blood Shield</strong></li>
    <li><strong>Ability</strong></li>
  </ul>
  <p>Each order type is explained in detail in its respective section below.</p>
        </div>

        <div class="phase-card">
  <h3>3. Action Phase</h3>
  <p>In <strong>initiative order</strong>, players take turns revealing and resolving <strong>one</strong> of their order tokens at a time.</p>
  <ul>
    <li>On their turn, a player may choose <strong>any</strong> of their unrevealed order tokens to resolve.</li>
    <li>The order of execution <strong>does not need to match</strong> the order in which the tokens were placed during the Planning Phase.</li>
    <li>After resolving one order, the turn passes to the next player in initiative order.</li>
    <li>This cycle continues until <strong>all order tokens</strong> on the board have been resolved.</li>
    <li>If a player has no remaining order tokens, they <strong>skip</strong> their turn.</li>
  </ul>
  <p><strong>Blessing cards</strong> and <strong>abilities</strong> may modify how orders are executed or interact with turn structure.</p>
        </div>

        <div class="phase-card">
  <h3>End of Round</h3>
  <ul>
    <li>All <strong>status effects</strong> trigger at this time, potentially causing events or conflicts (e.g., multiple avatar deaths), which are resolved in <strong>initiative order</strong>.</li>
    <li>All ability cards on the <strong>Cooldown Track</strong> move one space to the left.</li>
    <li>The <strong>active Blessing card</strong> is discarded.</li>
    <li>A new round begins, starting with the <strong>Betting Phase</strong>.</li>
  </ul>
        </div>
      </div>
    </section>

    <section id="orders">
      <h2>Order Types</h2>
      <div class="orders-container">
        <section id="orders">
  <div class="orders-container">

<details>
  <summary>Movement <img src='img/order-move.png' alt='Movement order'></summary>
  <div class="order-content">
    <p>Movement allows units to travel from one hex to another. Each unit can move a different number of hexes, but always at least one. Units cannot move through other units, whether friendly or enemy.</p>
    <ul>
      <li>Foot followers move 1 hex.</li>
      <li>Mounted followers move up to 2 hexes.</li>
      <li>Avatars move up to 3 hexes.</li>
    </ul>
    <p class="vijayanagara">A special unit is the <strong>Vijayanagara Elephant</strong>. A foot follower can be placed on top of its tile:</p>
    <ul>
      <li class="vijayanagara">This can be done using a Movement action by the follower or during a Recruit action.</li>
      <li class="vijayanagara">The elephant and the follower on it move together and count as a mounted follower.</li>
    </ul>
  </div>
</details>

<details>
  <summary>Recruit <img src='img/order-recruit.png' alt='Recruit order'></summary>
  <div class="order-content">
    <p>The "Recruit" order allows a player to place a new follower on the battlefield. Tiles may only be placed on:</p>
    <ul>
      <li>The starting hex</li>
      <li>The two adjacent hexes marked with color</li>
    </ul>
    <p>New units may only be placed on <strong>unoccupied hexes</strong>.</p>
  </div>
</details>

<details>
  <summary>Attack <img src='img/order-attack.png' alt='Attack order'></summary>
  <div class="order-content">

    <div class="unit-block">
    <p class="order-description">The primary way to deal damage.</p>
      <p class="unit-type"><strong>Swordsmen</strong>: Deal <strong>4 damage</strong> to adjacent hexes (melee combat).</p>
      <p><em>Example:</em> A swordsman stands next to an enemy and deals 4 damage.</p>
      <img src='img/hex-swordsmen.png' alt='Swordsmen attack pattern'>
    </div>

    <div class="unit-block">
      <p class="unit-type"><strong>Spearmen</strong>: Deal <strong>2 damage</strong> to the adjacent hex and the one behind it. This is <strong>piercing damage</strong> — all units on those hexes receive the damage, even allies.</p>
      <p><em>Example:</em></p>
      <ol>
        <li>Hits the adjacent enemy.</li>
        <li>Hits the unit behind.</li>
        <li>If one of them is an ally, they take damage too.</li>
      </ol>
      <img src='img/hex-spearmen.png' alt='Spearmen attack pattern'>
    </div>

    <div class="unit-block">
      <p class="unit-type"><strong>Archers</strong>: Deal damage based on distance:</p>
      <ul>
        <li>3 hexes — <strong>3 damage</strong></li>
        <li>2 hexes — <strong>2 damage</strong></li>
        <li>Adjacent — <strong>1 damage</strong></li>
      </ul>
      <p>Archers attack using a <strong>arcing shot</strong>, so line-of-sight rules do not apply.</p>
      <img src='img/hex-archer.png' alt='Archer attack pattern'>
    </div>

      <p class="unit-type"><strong>Avatars</strong>: Can attack only adjacent hexes. The type and strength of the attack depend on the <strong>ability card</strong> used.</p>

      <p class="unit-type"><strong>Phantom Targets</strong>: You may target <strong>phantom (empty) hexes</strong> to avoid damaging friendly units or triggering Blood Shield effects.</p>
      <p><em>Example:</em> A swordsman attacks an empty hex to avoid harming an ally.</p>

      <p class="unit-type"><strong>Tracking Health:</strong></p>
      <ul>
        <li>Follower health is shown at the bottom edge of the tile.</li>
        <li>When taking damage, rotate the tile to indicate the new health value.</li>
        <li>Orientation is determined using the alignment line on starting hexes.</li>
        <li>Health for Avatars, the Elephant, and the Daimyo is tracked on the Nation Board.</li>
      </ul>
  </div>
</details>


<details>
  <summary>Blood Shield <img src='img/order-shield.png' alt='Blood Shield order'></summary>
  <div class="order-content">
    <p>The Blood Shield allows you to <strong>turn the enemy’s attack against them</strong>.</p>
    <ul>
      <li>If a unit with a Blood Shield token is attacked, the token is revealed.</li>
      <li>The attacker takes the damage they would have dealt.</li>
    </ul>
    <p><em>Important:</em> The Blood Shield does not protect against abilities unless the ability specifically says it performs an "Attack".</p>
    <ul>
      <li>A player cannot reveal the shield voluntarily.</li>
      <li>If a player has no remaining unrevealed order tokens except Blood Shield, the token is revealed.</li>
      <li>The unit with the shield takes damage <strong>equal to its own Attack value</strong>.</li>
      <li>Archers take <strong>2 damage</strong> when their Blood Shield is triggered.</li>
    </ul>
  </div>
</details>

 <details>
  <summary>Ability <img src='img/order-ability.png' alt='Ability order'></summary>
  <div class="order-content">
    <p>There are two types of abilities: <strong>active</strong> and <strong>triggered</strong>.</p>
    <ul>
      <li><strong>Triggered abilities</strong> do not require a token to activate. They are triggered automatically or at the player's discretion when certain conditions are met (e.g., performing a Recruit action, an enemy entering a designated zone, or a unit's death).</li>
      <li><strong>Active abilities</strong> require placing an Ability token on the avatar’s portrait on the Nation Board during the Planning Phase.</li>
    </ul>
    <p>During the Action Phase, the player may resolve an available Ability card (i.e., one not on cooldown track). After use, the Ability card is placed onto the Cooldown Track, occupying the slot that corresponds to its cooldown value.</p>
    <p class="japan"><strong>Special Rule - Yamato:</strong> Some Yamato followers can use Ability orders. To do so, place an Ability token on the follower's tile during the Planning Phase. This allows them to use their unique Ability during the Action Phase instead of the avatar.</p>

    <h4>Ability Targeting Types</h4>
    <ul>
      <li><strong>Line of sight:</strong> A straight line blocked by any unit — if a unit (friendly or enemy) stands between the source and the target, it becomes the new target.</li>
      <li><strong>Arcing shot:</strong> A straight line that is <em>not</em> blocked by units. Archers use this type of trajectory.</li>
      <li><strong>Any target:</strong> The ability may target any unit within range, regardless of obstacles or line shape.</li>
    </ul>

    <p>Some abilities affect multiple hexes simultaneously. These abilities display a pattern showing the area of effect. The pattern may be rotated or mirrored, and may partially extend off the board.</p>

    <ul>
      <li><strong>White hex:</strong> Position of the casting unit.</li>
      <li><strong>Red hexes:</strong> Targeted area. Friendly units in red hexes also take damage.</li>
    </ul>

    <h4>Special Ability Types</h4>
    <ul>
      <li><strong>Electricity X:</strong> Deals X damage to a unit, then chains to adjacent units, each taking 1 less damage than the previous. Max chain length = X. Each unit can only be affected once per chain.</li>
      <li><strong>Status Effects:</strong> Some abilities apply special status tokens to units (see below).</li>
      <li><strong>Multi-strike:</strong> Perform an Attack X times.</li>
      <li><strong>Piercing attack:</strong> Hits multiple hexes in a straight line, damaging each.</li>
      <li><strong>Push / Pull:</strong> Move a chosen unit up to X hexes toward or away from the caster. Then deal damage equal to the number of hexes moved.</li>
    </ul>

    <h4>Status Effects</h4>
    <ul>
      <li><strong>Ice:</strong> Place X Ice tokens on an enemy unit. While at least one token remains, the unit cannot receive orders. Remove one Ice token at the end of each round. A player may also skip an order to remove one Ice token. If the unit already has an order token, it stays and activates once Ice tokens are gone.<br><img src="img/status-ice.png" alt="Ice status effect"></li>
      <li><strong>Fire:</strong> Fire tokens may be placed on units or hexes. If a unit steps on a Fire hex, the token moves to the unit. At the end of the round, each Fire token deals X damage and is discarded. <br><img src="img/status-fire.png" alt="Fire status effect"></li>
      <li><strong>Bleed:</strong> Place a Bleed token on a unit. After that unit resolves any order, it takes X damage and the token is discarded. Only one Bleed token triggers per order. Multiple tokens may exist on one unit. <br><img src="img/status-bleeding.png" alt="Bleeding status effect"></li>
      <li><strong>Blight:</strong> Place X Blight tokens on an enemy unit. At the end of each round, the unit takes damage equal to the number of tokens, then remove one. Damage decreases each round until all tokens are gone.<br><img src="img/status-blight.png" alt="Blight status effect"></li>
    </ul>

    <p><em>Note:</em> If a player is eliminated, the status effects they applied remain on the board.</p>
  </div>
</details>
  </div>
</section>

      <!-- </div>
    </section> -->


    <section id="faq">
      <h2>FAQ Highlights</h2>
      <ul class="faq-list">
        <li>Teleport is not movement.</li>
        <li>Blood Shield doesn't block abilities unless they contain Attacks.</li>
        <li>Elephant damage doesn't overflow to rider.</li>
        <li>Nomads' Trigger ignores teleport/blessing swaps.</li>
      </ul>
    </section>
  </main>

   <script>
        // Component data structure - easy to modify
        const componentsData = {
            "Game Boards": {
                type: "multi",
                items: [
                    { name: "2 Players Board", image: "img/board-2p.png" },
                    { name: "3 Players Board", image: "img/board-3p.png" },
                    { name: "4 Players Board", image: "img/board-4p.png" }
                ]
            },
            // "Blessings Board": {
            //     type: "single",
            //     image: "img/blessings-board.png"
            // },
            "Nation Boards": {
                type: "nations",
                items: [
                    { name: "Japan Board", image: "img/nation-japan.png", nation: "japan" },
                    { name: "Vijayanagara Board", image: "img/nation-vijayanagara.png", nation: "vijayanagara" },
                    { name: "Nomads Board", image: "img/nation-nomads.png", nation: "nomads" },
                    { name: "Aztecs Board", image: "img/nation-aztecs.png", nation: "aztecs" }
                ]
            },
            "Avatar Miniatures": {
                type: "nations",
                items: [
                    { name: "Japan Avatar", image: "img/avatar-japan.png", nation: "japan" },
                    { name: "Vijayanagara Avatar", image: "img/avatar-vijayanagara.png", nation: "vijayanagara" },
                    { name: "Nomads Avatar", image: "img/avatar-nomads.png", nation: "nomads" },
                    { name: "Aztecs Avatar", image: "img/avatar-aztecs.png", nation: "aztecs" }
                ]
            },
            // "Follower Tiles": {
            //     type: "nations",
            //     items: [
            //         { name: "Japan Followers", image: "img/followers-japan.png", nation: "japan" },
            //         { name: "Vijayanagara Followers", image: "img/followers-vijayanagara.png", nation: "vijayanagara" },
            //         { name: "Nomads Followers", image: "img/followers-nomads.png", nation: "nomads" },
            //         { name: "Aztecs Followers", image: "img/followers-aztecs.png", nation: "aztecs" }
            //     ]
            // },
            "Ability Cards": {
                type: "nations",
                items: [
                    { name: "Japan Abilities", image: "img/abilities-japan.png", nation: "japan" },
                    { name: "Vijayanagara Abilities", image: "img/abilities-vijayanagara.png", nation: "vijayanagara" },
                    { name: "Nomads Abilities", image: "img/abilities-nomads.png", nation: "nomads" },
                    { name: "Aztecs Abilities", image: "img/abilities-aztecs.png", nation: "aztecs" }
                ]
            },
            "Blessing Cards": {
                type: "multi",
                items: [
                    { name: "Blessing Card 1", image: "img/blessing-1.png" },
                    { name: "Blessing Card 2", image: "img/blessing-2.png" },
                    { name: "Blessing Card 3", image: "img/blessing-3.png" },
                    { name: "Blessing Card 4", image: "img/blessing-4.png" },
                    { name: "Blessing Card 5", image: "img/blessing-5.png" }
                ]
            },
            // "Faith Tokens": {
            //     type: "multi",
            //     items: [
            //         { name: "1 Faith Token", image: "img/faith-1.png" },
            //         { name: "3 Faith Token", image: "img/faith-3.png" },
            //         { name: "5 Faith Token", image: "img/faith-5.png" }
            //     ]
            // },
            "Status Effect Tokens": {
                type: "multi",
                items: [
                    { name: "Blight Token", image: "img/status-blight.png" },
                    { name: "Bleeding Token", image: "img/status-bleeding.png" },
                    { name: "Ice Token", image: "img/status-ice.png" },
                    { name: "Fire Token", image: "img/status-fire.png" },
                    { name: "Shield Token", image: "img/status-shield.png" }
                ]
            }
        };

        class ComponentSlider {
            constructor(container, componentName, data) {
                this.container = container;
                this.componentName = componentName;
                this.data = data;
                this.currentIndex = 0;
                this.isTransitioning = false; // Флаг для предотвращения множественных переходов
                this.init();
            }

            init() {
                this.render();
                this.attachEvents();
            }

            render() {
                if (this.data.type === 'single') {
                    this.renderSingleComponent();
                } else {
                    this.renderSlider();
                }
            }

            renderSingleComponent() {
                this.container.innerHTML = `
                    <div class="single-component">
                        <h3 class="component-title">${this.componentName}</h3>
                        <div class="component-image">
                            <img src="${this.data.image}" alt="${this.componentName}" 
                                 onerror="this.style.display='none'; this.parentNode.innerHTML='${this.componentName}<br><small>Image not found: ${this.data.image}</small>'">
                        </div>
                    </div>
                `;
            }

            renderSlider() {
                const slides = this.data.items.map((item, index) => `
                    <div class="slide">
                        <div class="component-image">
                            <img src="${item.image}" alt="${item.name}" 
                                 onerror="this.style.display='none'; this.parentNode.innerHTML='${item.name}<br><small>Image not found</small>'">
                        </div>
                        <div class="slide-caption">${item.name}</div>
                    </div>
                `).join('');

                const indicators = this.data.items.map((item, index) => {
                    const nationClass = item.nation ? `nation-${item.nation}` : 'generic';
                    const activeClass = index === 0 ? 'active' : '';
                    return `<div class="indicator ${nationClass} ${activeClass}" data-index="${index}"></div>`;
                }).join('');

                const componentId = this.componentName.replace(/\s+/g, '').replace(/[^a-zA-Z0-9]/g, '');

                this.container.innerHTML = `
                    <h3 class="component-title">${this.componentName}</h3>
                    <div class="slider-container">
                        <div class="slider-wrapper">
                            ${slides}
                        </div>
                    </div>
                    <div class="slider-nav">
                        <button class="nav-button" data-action="prev">‹</button>
                        <div class="indicators">
                            ${indicators}
                        </div>
                        <div class="slide-counter">
                            <span class="current">1</span> / <span class="total">${this.data.items.length}</span>
                        </div>
                        <button class="nav-button" data-action="next">›</button>
                    </div>
                `;
            }

            attachEvents() {
                if (this.data.type === 'single') return;

                // Используем делегирование событий для надежности
                this.container.addEventListener('click', (e) => {
                    if (this.isTransitioning) return; // Предотвращаем множественные клики

                    if (e.target.matches('.nav-button[data-action="prev"]')) {
                        e.preventDefault();
                        this.prevSlide();
                    } else if (e.target.matches('.nav-button[data-action="next"]')) {
                        e.preventDefault();
                        this.nextSlide();
                    } else if (e.target.matches('.indicator')) {
                        e.preventDefault();
                        const index = parseInt(e.target.dataset.index);
                        if (!isNaN(index)) {
                            this.goToSlide(index);
                        }
                    }
                });

                // Добавляем обработчик окончания перехода
                const wrapper = this.container.querySelector('.slider-wrapper');
                if (wrapper) {
                    wrapper.addEventListener('transitionend', () => {
                        this.isTransitioning = false;
                    });
                }

                this.updateNavigation();
            }

            prevSlide() {
                if (this.isTransitioning || this.currentIndex <= 0) return;
                this.isTransitioning = true;
                this.currentIndex--;
                this.updateSlider();
            }

            nextSlide() {
                if (this.isTransitioning || this.currentIndex >= this.data.items.length - 1) return;
                this.isTransitioning = true;
                this.currentIndex++;
                this.updateSlider();
            }

            goToSlide(index) {
                if (this.isTransitioning || index === this.currentIndex || index < 0 || index >= this.data.items.length) return;
                this.isTransitioning = true;
                this.currentIndex = index;
                this.updateSlider();
            }

            updateSlider() {
                const wrapper = this.container.querySelector('.slider-wrapper');
                const indicators = this.container.querySelectorAll('.indicator');
                const current = this.container.querySelector('.current');

                if (wrapper) {
                    wrapper.style.transform = `translateX(-${this.currentIndex * 100}%)`;
                }
                
                indicators.forEach((indicator, index) => {
                    indicator.classList.toggle('active', index === this.currentIndex);
                });

                if (current) {
                    current.textContent = this.currentIndex + 1;
                }
                
                this.updateNavigation();
            }

            updateNavigation() {
                const prevBtn = this.container.querySelector('[data-action="prev"]');
                const nextBtn = this.container.querySelector('[data-action="next"]');

                if (prevBtn) prevBtn.disabled = this.currentIndex === 0;
                if (nextBtn) nextBtn.disabled = this.currentIndex === this.data.items.length - 1;
            }
        }

        // Initialize components
        function initComponents() {
            const grid = document.getElementById('componentsGrid');
            if (!grid) {
                console.error('Components grid not found');
                return;
            }
            
            Object.entries(componentsData).forEach(([componentName, data]) => {
                try {
                    const container = document.createElement('div');
                    container.className = 'component-container';
                    grid.appendChild(container);
                    
                    new ComponentSlider(container, componentName, data);
                } catch (error) {
                    console.error(`Error creating slider for ${componentName}:`, error);
                }
            });
        }

        // Initialize when DOM is loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initComponents);
        } else {
            initComponents();
        }
    </script>
</body>
</html>